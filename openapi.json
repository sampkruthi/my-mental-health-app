{"openapi":"3.1.0","info":{"title":"AI Mental Health Companion","version":"0.1.0"},"paths":{"/api/chat/chat":{"post":{"summary":"Chat Endpoint","description":"Enhanced chat endpoint with comprehensive safety integration and debug options.\n\nQuery Parameters:\n- debug: Include detailed safety analysis and debug information\n- show_original: Show original LLM response before safety filtering\n- reset_limits: Reset usage limits for testing (debug mode only)","operationId":"chat_endpoint_api_chat_chat_post","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"debug","in":"query","required":false,"schema":{"type":"boolean","description":"Include safety debug information","default":false,"title":"Debug"},"description":"Include safety debug information"},{"name":"show_original","in":"query","required":false,"schema":{"type":"boolean","description":"Show original response before filtering","default":false,"title":"Show Original"},"description":"Show original response before filtering"},{"name":"reset_limits","in":"query","required":false,"schema":{"type":"boolean","description":"Reset usage limits for testing","default":false,"title":"Reset Limits"},"description":"Reset usage limits for testing"}],"requestBody":{"required":true,"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}}},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/chat/chat/sync":{"post":{"summary":"Chat Endpoint Sync","description":"Synchronous chat endpoint for backward compatibility.\nNote: This bypasses some safety checks and should be migrated to async version.","operationId":"chat_endpoint_sync_api_chat_chat_sync_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatRequest"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ChatResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/chat/health":{"get":{"summary":"Chat Health Check","description":"Health check endpoint that includes safety system status.","operationId":"chat_health_check_api_chat_health_get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/chat/usage/{user_id}":{"get":{"summary":"Get User Usage","description":"Get usage statistics for a user (for debugging/admin purposes).","operationId":"get_user_usage_api_chat_usage__user_id__get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"user_id","in":"path","required":true,"schema":{"type":"string","title":"User Id"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/mood/log":{"post":{"summary":"Api Log Mood","operationId":"api_log_mood_api_mood_log_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/MoodRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/mood/history":{"get":{"summary":"Api Mood History","operationId":"api_mood_history_api_mood_history_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":7,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MoodEntry"},"title":"Response Api Mood History Api Mood History Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/mood/trends":{"get":{"summary":"Api Mood Trends","operationId":"api_mood_trends_api_mood_trends_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/MoodTrend"},"title":"Response Api Mood Trends Api Mood Trends Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/journal/log":{"post":{"summary":"Api Log Entry","operationId":"api_log_entry_api_journal_log_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/JournalLogRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JournalEntryResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/journal/history":{"get":{"summary":"Api Get History","operationId":"api_get_history_api_journal_history_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/JournalEntryResponse"},"title":"Response Api Get History Api Journal History Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/journal/insights":{"get":{"summary":"Api Get Insights","operationId":"api_get_insights_api_journal_insights_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"days","in":"query","required":false,"schema":{"type":"integer","default":30,"title":"Days"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/JournalInsightResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/activities/suggest":{"get":{"tags":["activities"],"summary":"Api Suggest Activities","operationId":"api_suggest_activities_api_activities_suggest_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"count","in":"query","required":false,"schema":{"type":"integer","default":3,"title":"Count"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"type":"array","items":{"$ref":"#/components/schemas/ActivityResponseDTO"},"title":"Response Api Suggest Activities Api Activities Suggest Get"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/reminders/":{"get":{"tags":["reminders"],"summary":"Api List Reminders","operationId":"api_list_reminders_api_reminders__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"items":{"$ref":"#/components/schemas/ReminderResponse"},"type":"array","title":"Response Api List Reminders Api Reminders  Get"}}}}},"security":[{"OAuth2PasswordBearer":[]}]},"post":{"tags":["reminders"],"summary":"Api Create Reminder","operationId":"api_create_reminder_api_reminders__post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReminderRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/ReminderResponse"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}},"security":[{"OAuth2PasswordBearer":[]}]}},"/api/reminders/{reminder_id}":{"delete":{"tags":["reminders"],"summary":"Api Delete Reminder","operationId":"api_delete_reminder_api_reminders__reminder_id__delete","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"reminder_id","in":"path","required":true,"schema":{"type":"integer","title":"Reminder Id"}}],"responses":{"204":{"description":"Successful Response"},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/token":{"post":{"tags":["auth"],"summary":"Login For Access Token","operationId":"login_for_access_token_api_auth_token_post","requestBody":{"content":{"application/x-www-form-urlencoded":{"schema":{"$ref":"#/components/schemas/Body_login_for_access_token_api_auth_token_post"}}},"required":true},"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/auth/register":{"post":{"tags":["auth"],"summary":"Register","operationId":"register_api_auth_register_post","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/RegisterRequest"}}},"required":true},"responses":{"201":{"description":"Successful Response","content":{"application/json":{"schema":{"$ref":"#/components/schemas/Token"}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/api/recommend/content":{"get":{"tags":["recommend"],"summary":"Recommend Content","operationId":"recommend_content_api_recommend_content_get","security":[{"OAuth2PasswordBearer":[]}],"parameters":[{"name":"k","in":"query","required":false,"schema":{"type":"integer","default":5,"title":"K"}}],"responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}},"422":{"description":"Validation Error","content":{"application/json":{"schema":{"$ref":"#/components/schemas/HTTPValidationError"}}}}}}},"/":{"get":{"summary":"Read Root","operationId":"read_root__get","responses":{"200":{"description":"Successful Response","content":{"application/json":{"schema":{}}}}}}}},"components":{"schemas":{"ActivityResponseDTO":{"properties":{"id":{"type":"integer","title":"Id"},"title":{"type":"string","title":"Title"},"type":{"type":"string","title":"Type"},"description":{"type":"string","title":"Description"},"script":{"type":"string","title":"Script"}},"type":"object","required":["id","title","type","description","script"],"title":"ActivityResponseDTO"},"Body_login_for_access_token_api_auth_token_post":{"properties":{"grant_type":{"anyOf":[{"type":"string","pattern":"^password$"},{"type":"null"}],"title":"Grant Type"},"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"},"scope":{"type":"string","title":"Scope","default":""},"client_id":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Id"},"client_secret":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Client Secret"}},"type":"object","required":["username","password"],"title":"Body_login_for_access_token_api_auth_token_post"},"ChatRequest":{"properties":{"user_id":{"type":"string","title":"User Id"},"message":{"type":"string","title":"Message"}},"type":"object","required":["user_id","message"],"title":"ChatRequest","example":{"message":"I'm feeling really overwhelmed today","user_id":"user123"}},"ChatResponse":{"properties":{"response":{"type":"string","title":"Response"},"safety_metadata":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Safety Metadata"},"crisis_intervention":{"anyOf":[{"type":"boolean"},{"type":"null"}],"title":"Crisis Intervention","default":false},"usage_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Usage Info"},"debug_info":{"anyOf":[{"additionalProperties":true,"type":"object"},{"type":"null"}],"title":"Debug Info"}},"type":"object","required":["response"],"title":"ChatResponse","example":{"crisis_intervention":false,"debug_info":{"original_response":"Original response before filtering...","safety_analysis":{"keywords_detected":[],"risk_score":0.1},"usage_limits_reset":false},"response":"I hear that you're feeling overwhelmed. That sounds really difficult...","safety_metadata":{"filtered":false,"risk_level":"low"},"usage_info":{"daily_messages":5,"session_messages":2}}},"HTTPValidationError":{"properties":{"detail":{"items":{"$ref":"#/components/schemas/ValidationError"},"type":"array","title":"Detail"}},"type":"object","title":"HTTPValidationError"},"JournalEntryResponse":{"properties":{"id":{"type":"integer","title":"Id"},"content":{"type":"string","title":"Content"},"sentiment":{"type":"number","title":"Sentiment"},"timestamp":{"type":"string","format":"date-time","title":"Timestamp"}},"type":"object","required":["id","content","sentiment","timestamp"],"title":"JournalEntryResponse"},"JournalInsightResponse":{"properties":{"avg_sentiment":{"anyOf":[{"type":"number"},{"type":"null"}],"title":"Avg Sentiment"},"entry_count":{"type":"integer","title":"Entry Count"},"entries_per_day":{"type":"number","title":"Entries Per Day"}},"type":"object","required":["avg_sentiment","entry_count","entries_per_day"],"title":"JournalInsightResponse"},"JournalLogRequest":{"properties":{"content":{"type":"string","title":"Content"}},"type":"object","required":["content"],"title":"JournalLogRequest"},"MoodEntry":{"properties":{"timestamp":{"type":"string","format":"date-time","title":"Timestamp"},"mood_score":{"type":"integer","title":"Mood Score"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"}},"type":"object","required":["timestamp","mood_score","note"],"title":"MoodEntry"},"MoodRequest":{"properties":{"mood_score":{"type":"integer","title":"Mood Score"},"note":{"anyOf":[{"type":"string"},{"type":"null"}],"title":"Note"}},"type":"object","required":["mood_score"],"title":"MoodRequest"},"MoodTrend":{"properties":{"date":{"type":"string","title":"Date"},"avg_mood":{"type":"number","title":"Avg Mood"}},"type":"object","required":["date","avg_mood"],"title":"MoodTrend"},"RegisterRequest":{"properties":{"username":{"type":"string","title":"Username"},"password":{"type":"string","title":"Password"}},"type":"object","required":["username","password"],"title":"RegisterRequest"},"ReminderRequest":{"properties":{"type":{"type":"string","pattern":"^(meditation|journaling|hydration|activity)$","title":"Type"},"hour":{"type":"integer","maximum":23.0,"minimum":0.0,"title":"Hour"},"minute":{"type":"integer","maximum":59.0,"minimum":0.0,"title":"Minute"},"message":{"type":"string","title":"Message"}},"type":"object","required":["type","hour","minute","message"],"title":"ReminderRequest"},"ReminderResponse":{"properties":{"id":{"type":"integer","title":"Id"},"type":{"type":"string","title":"Type"},"hour":{"type":"integer","title":"Hour"},"minute":{"type":"integer","title":"Minute"},"message":{"type":"string","title":"Message"}},"type":"object","required":["id","type","hour","minute","message"],"title":"ReminderResponse"},"Token":{"properties":{"access_token":{"type":"string","title":"Access Token"},"token_type":{"type":"string","title":"Token Type","default":"bearer"}},"type":"object","required":["access_token"],"title":"Token"},"ValidationError":{"properties":{"loc":{"items":{"anyOf":[{"type":"string"},{"type":"integer"}]},"type":"array","title":"Location"},"msg":{"type":"string","title":"Message"},"type":{"type":"string","title":"Error Type"}},"type":"object","required":["loc","msg","type"],"title":"ValidationError"}},"securitySchemes":{"OAuth2PasswordBearer":{"type":"oauth2","flows":{"password":{"scopes":{},"tokenUrl":"api/auth/token"}}}}}}